[2025-12-16 19:11:27] UPS SNMP Trap Receiver - Starting daemon initialization...
# Log file test write at 2025-12-16 19:11:27.784483
2025-12-16 19:11:27,794 - INFO - ================================================================================
2025-12-16 19:11:27,795 - INFO - UPS/ATS SNMP TRAP RECEIVER v3 - INITIALIZATION EVENT (SNMPv2c)
2025-12-16 19:11:27,795 - INFO - Initialization Time: 2025-12-16 19:11:27
2025-12-16 19:11:27,795 - INFO - Log File: /usr/local/src/raspberrySTS/logs/ups_traps20251216.log
2025-12-16 19:11:27,796 - INFO - ================================================================================
2025-12-16 19:11:27,796 - INFO - ======================================================================
2025-12-16 19:11:27,797 - INFO - UPS/ATS SNMP Trap Receiver v3 - Logging initialized (SNMPv2c)
2025-12-16 19:11:27,797 - INFO - Log file: /usr/local/src/raspberrySTS/logs/ups_traps20251216.log
2025-12-16 19:11:27,797 - INFO - Log file exists: True
2025-12-16 19:11:27,798 - INFO - Log file writable: True
2025-12-16 19:11:27,802 - INFO - Allowed IPs now include 2 UPS device(s): 192.168.111.137, 192.168.111.173
2025-12-16 19:11:27,802 - INFO - SMS time-based schedule configured with 3 time period(s)
2025-12-16 19:11:27,803 - INFO -   Period 1: 00:00 - 08:00 -> 1 recipient(s): ['92291045']
2025-12-16 19:11:27,803 - INFO -   Period 2: 08:01 - 14:00 -> 1 recipient(s): ['61306195']
2025-12-16 19:11:27,804 - INFO -   Period 3: 14:01 - 23:59 -> 1 recipient(s): ['92291045']
2025-12-16 19:11:27,805 - INFO - Buzzer is MUTED - buzzer will not sound during alarms (LED 10 will still indicate alarm if enabled)
2025-12-16 19:11:27,805 - INFO - LED load thresholds loaded from config: L1=0-5%, L2=6-20%, L3=21-28%, L4>=29%
2025-12-16 19:11:27,806 - INFO - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:11:27,806 - INFO - GPIO pins configured: {'critical': 17, 'warning': 17}
2025-12-16 19:11:27,814 - INFO - GPIO pin 17 configured as output (initialized to OFF)
2025-12-16 19:11:27,815 - INFO - GPIO pin 17 configured as output (initialized to OFF)
2025-12-16 19:11:27,816 - INFO - GPIO initialized successfully on 2 pin(s)
2025-12-16 19:11:27,817 - INFO - GPIO LED controller initialized successfully with pins: {'critical': 17, 'warning': 17}
2025-12-16 19:11:27,818 - INFO - GPIO initialized (mode: BCM, active_high: True)
2025-12-16 19:11:27,819 - INFO - Panel LED Controller initialized successfully (AlarmMap-based LED control)
2025-12-16 19:11:27,819 - INFO - Enabling 10 green LED(s)...
2025-12-16 19:11:27,821 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:11:27,822 - INFO -   Enabled green LED 2 (MBP1 Normal) on GPIO pin 5
2025-12-16 19:11:27,823 - DEBUG - GPIO pin 22 set to ON (active_high: True)
2025-12-16 19:11:27,823 - INFO -   Enabled green LED 3 (SYNC Status 1) on GPIO pin 22
2025-12-16 19:11:27,824 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:11:27,825 - INFO -   Enabled green LED 4 (MBP2 Normal) on GPIO pin 23
2025-12-16 19:11:27,826 - DEBUG - GPIO pin 24 set to ON (active_high: True)
2025-12-16 19:11:27,827 - INFO -   Enabled green LED 6 (SYNC Status 1) on GPIO pin 24
2025-12-16 19:11:27,828 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:11:27,829 - INFO -   Enabled green LED 7 (SYNC Status 2) on GPIO pin 25
2025-12-16 19:11:27,830 - DEBUG - GPIO pin 16 set to ON (active_high: True)
2025-12-16 19:11:27,830 - INFO -   Enabled green LED 8 (SYSTEM OK) on GPIO pin 16
2025-12-16 19:11:27,831 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:11:27,832 - INFO -   Enabled green LED 9 (OUTPUT Status) on GPIO pin 20
2025-12-16 19:11:27,833 - DEBUG - GPIO pin 27 set to ON (active_high: True)
2025-12-16 19:11:27,834 - INFO -   Enabled green LED 12 (LOAD Normal Middle) on GPIO pin 27
2025-12-16 19:11:27,835 - DEBUG - GPIO pin 11 set to ON (active_high: True)
2025-12-16 19:11:27,836 - INFO -   Enabled green LED 13 (LOAD Normal Lower) on GPIO pin 11
2025-12-16 19:11:27,837 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:11:27,838 - INFO -   Enabled green LED 14 (LOAD Normal Very Lower) on GPIO pin 15
2025-12-16 19:11:27,838 - INFO - Successfully enabled 10 green LED(s)
2025-12-16 19:11:27,839 - INFO - All green LEDs enabled on startup (from AlarmMap.PANEL_LED_MAPPING)
2025-12-16 19:11:27,840 - INFO - Disabling 4 red LED(s)...
2025-12-16 19:11:27,841 - DEBUG - GPIO pin 4 set to OFF (active_high: True)
2025-12-16 19:11:27,841 - INFO -   Disabled red LED 1 (MBP1 Fault) on GPIO pin 4
2025-12-16 19:11:27,842 - DEBUG - GPIO pin 6 set to OFF (active_high: True)
2025-12-16 19:11:27,843 - INFO -   Disabled red LED 5 (MBP2 Fault) on GPIO pin 6
2025-12-16 19:11:27,843 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:27,844 - INFO -   Disabled red LED 10 (ALARM) on GPIO pin 12
2025-12-16 19:11:27,845 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:11:27,846 - INFO -   Disabled red LED 11 (LOAD Overload) on GPIO pin 26
2025-12-16 19:11:27,847 - INFO - Successfully disabled 4 red LED(s)
2025-12-16 19:11:27,847 - INFO - All red LEDs disabled on startup (from AlarmMap.PANEL_LED_MAPPING)
2025-12-16 19:11:27,848 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:11:27,849 - INFO - Buzzer/speaker disabled on startup using disable_buzzer() (GPIO pin 18)
2025-12-16 19:11:27,851 - INFO - ALARM_STATUS loaded from config: True
2025-12-16 19:11:27,859 - INFO - Sound controller initialized - using aplay
2025-12-16 19:11:27,860 - INFO - Sound controller initialized successfully
2025-12-16 19:11:27,861 - INFO - Using ATS device IP from allowed_ips: 192.168.111.173
2025-12-16 19:11:28,156 - INFO - Initializing UPS status checker for host: 192.168.111.173 (community: public, port: 161)
2025-12-16 19:11:28,165 - DEBUG - Using selector: EpollSelector
2025-12-16 19:11:28,255 - INFO - UPS status checker initialized successfully for host: 192.168.111.173
2025-12-16 19:11:28,256 - INFO - ================================================================================
2025-12-16 19:11:28,256 - INFO - UPS/ATS SNMP TRAP RECEIVER v3 - START EVENT (SNMPv2c)
2025-12-16 19:11:28,256 - INFO - Start Time: 2025-12-16 19:11:28
2025-12-16 19:11:28,256 - INFO - ================================================================================
2025-12-16 19:11:28,256 - INFO - Starting UPS/ATS SNMP Trap Receiver v3 on Linux
2025-12-16 19:11:28,256 - INFO - Protocol: SNMPv2c (primary), SNMPv1 (backward compatibility)
2025-12-16 19:11:28,256 - INFO - MIB: ATS_Stork_V1_05 - Borri STS32A.MIB
2025-12-16 19:11:28,257 - INFO - Listening on port: 162
2025-12-16 19:11:28,257 - INFO - Logging to: /usr/local/src/raspberrySTS/logs/ups_traps20251216.log
2025-12-16 19:11:28,257 - INFO - Filtering: Only accepting traps from: 192.168.111.173, 127.0.0.1, 192.168.111.173, 192.168.111.137
2025-12-16 19:11:28,257 - INFO - Press Ctrl+C to stop
2025-12-16 19:11:28,257 - INFO - PID file written: /usr/local/src/raspberrySTS/ups_trap_receiver.pid
2025-12-16 19:11:28,258 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:11:28,258 - INFO - Buzzer/speaker disabled on service start using disable_buzzer() (GPIO pin 18)
2025-12-16 19:11:28,258 - INFO - UPS status check thread started (checking every 10 seconds)
2025-12-16 19:11:28,258 - INFO - UPS status check thread started (checking every 10 seconds)
2025-12-16 19:11:28,259 - INFO - [BUTTON] Checking button monitoring conditions: RPI_GPIO_AVAILABLE=True, is_windows=False
2025-12-16 19:11:28,259 - INFO - [BUTTON] Starting mute button monitor thread for GPIO 19
2025-12-16 19:11:28,259 - INFO - Button monitoring thread started (Mute: GPIO 19, Reset: GPIO 21) [NON-DAEMON]
2025-12-16 19:11:28,259 - INFO - [BUTTON] Current GPIO mode: 11 (BCM)
2025-12-16 19:11:28,259 - INFO - [BUTTON] Reset button monitoring thread DISABLED (for debug purposes)
2025-12-16 19:11:28,259 - INFO - [BUTTON] Removed existing event detection on GPIO 19
2025-12-16 19:11:28,260 - INFO - [BUTTON] GPIO mode is BCM - button pin 19 is correct for BCM mode.
2025-12-16 19:11:28,260 - DEBUG - [BUTTON] Removed existing event detection on GPIO 19
2025-12-16 19:11:28,261 - DEBUG - [BUTTON] Removed existing event detection on GPIO 21
2025-12-16 19:11:28,262 - INFO - [BUTTON] GPIO 19 (Mute) configured as input with pull-up
2025-12-16 19:11:28,263 - INFO - [BUTTON] GPIO 21 (Reset) configured as input with pull-up
2025-12-16 19:11:28,263 - INFO - [BUTTON] Initial mute button state: 1 (LOW=0, HIGH=1)
2025-12-16 19:11:28,263 - INFO - [BUTTON] Initial mute callback state (is_pressed): False
2025-12-16 19:11:28,263 - INFO - [BUTTON] Debounce time: 0.01s (10ms)
2025-12-16 19:11:28,263 - INFO - [BUTTON] Initial reset button state: 1 (LOW=0, HIGH=1)
2025-12-16 19:11:28,263 - INFO - [BUTTON] Initial reset callback state (is_pressed): False
2025-12-16 19:11:28,263 - INFO - [BUTTON] Test GPIO read: 1 (should be 1 if button not pressed)
2025-12-16 19:11:28,264 - INFO - [BUTTON] Hardware test - 5 consecutive reads: [1, 1, 1, 1, 1] (all should be 1 if button not pressed)
2025-12-16 19:11:28,264 - INFO - [BUTTON] GPIO constants: LOW=0, HIGH=1, IN=1, PUD_UP=22
2025-12-16 19:11:28,264 - INFO - [BUTTON] Mute button monitoring started on GPIO 19 (event-driven, GPIO.BOTH, bouncetime=10ms)
2025-12-16 19:11:28,264 - INFO - [BUTTON] Event detection registered - current pin state: 1 (LOW=0, HIGH=1)
2025-12-16 19:11:28,265 - INFO - [BUTTON] Starting polling loop for GPIO 19 (Mute) and GPIO 21 (Reset) (poll_interval=0.005s)
2025-12-16 19:11:28,265 - INFO - [BUTTON] Initial states - Mute: 1, Reset: 1
2025-12-16 19:11:28,741 - INFO - Detected device type: ats
2025-12-16 19:11:28,825 - DEBUG - Created new asyncio event loop (no existing loop)
2025-12-16 19:11:28,826 - DEBUG - Wrapped datagram_received to capture source address
2025-12-16 19:11:28,826 - DEBUG - SNMPv2c explicit configuration not available (will accept v2c traps by default)
2025-12-16 19:11:28,833 - DEBUG - SNMPv1 system configured (backward compatibility)
2025-12-16 19:11:28,833 - INFO - SNMP trap receiver will accept SNMPv2c traps (default behavior)
2025-12-16 19:11:28,834 - INFO - [SNMP] Starting SNMP dispatcher in separate thread...
2025-12-16 19:11:28,834 - INFO - [SNMP] SNMP dispatcher thread started (non-blocking)
2025-12-16 19:11:30,471 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:11:30,471 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:11:30,472 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:11:30,472 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:11:30,472 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:11:33,249 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:11:33,249 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:11:33,250 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:11:33,250 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:11:33,250 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:11:33,250 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:11:33,250 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:11:33,251 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:11:33,251 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:11:33,251 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:11:33,251 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:11:33,251 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:11:33,251 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:11:33,252 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:33,252 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:11:33,252 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:11:33,253 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:11:33,253 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:11:33,253 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:11:33,253 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:11:33,253 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:11:33,253 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:11:33,254 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:11:33,254 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:11:33,254 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:11:33,254 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:11:33,254 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:11:33,254 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:11:33,255 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:11:33,255 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:11:33,255 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:11:33,255 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:11:33,255 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:11:33,256 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:11:33,257 - INFO - Updated ALARM_STATUS in config.py to True
2025-12-16 19:11:33,257 - INFO - LED 10 changed from disabled to enabled -> ALARM_STATUS = True
2025-12-16 19:11:33,257 - INFO - ================================================================================
2025-12-16 19:11:33,257 - INFO - UPS STATUS CHECK
2025-12-16 19:11:33,258 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:11:33,258 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:11:33,258 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:11:33,265 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=253, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:33,265 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=253
2025-12-16 19:11:33,752 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:34,253 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:34,753 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:35,254 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:35,754 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:36,255 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:36,755 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:37,256 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:37,756 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:38,257 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:38,266 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1224, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:38,273 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=1224
2025-12-16 19:11:38,758 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:39,259 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:39,760 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:40,260 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:40,761 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:41,262 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:41,763 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:42,264 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:42,764 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:43,265 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:43,266 - INFO - Detected device type: ats
2025-12-16 19:11:43,266 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=2177, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:43,273 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=2177
2025-12-16 19:11:43,786 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:44,288 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:44,803 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:45,074 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:11:45,075 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:11:45,075 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:11:45,075 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:11:45,076 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:11:45,323 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:45,846 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:46,362 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:46,868 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:47,384 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:47,885 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:47,886 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:11:47,886 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:11:47,886 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:11:47,887 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:11:47,887 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:11:47,887 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:11:47,887 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:11:47,887 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:11:47,887 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:11:47,888 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:11:47,888 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:11:47,888 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:11:47,888 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:11:47,889 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:47,889 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:11:47,889 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:11:47,890 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:11:47,890 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:11:47,890 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:11:47,890 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:11:47,890 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:11:47,890 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:11:47,891 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:11:47,891 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:11:47,891 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:11:47,891 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:11:47,891 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:11:47,891 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:11:47,892 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:11:47,892 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:11:47,892 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:11:47,892 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:11:47,892 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:11:47,893 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:11:47,893 - INFO - ================================================================================
2025-12-16 19:11:47,893 - INFO - UPS STATUS CHECK
2025-12-16 19:11:47,893 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:11:47,893 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:11:47,893 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:11:48,268 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=2478, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:48,269 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=2478
2025-12-16 19:11:48,389 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:48,890 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:49,390 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:49,891 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:50,391 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:50,891 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:51,392 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:51,892 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:52,393 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:52,893 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:53,273 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=3455, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:53,274 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=3455
2025-12-16 19:11:53,394 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:53,895 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:54,396 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:54,896 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:55,397 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:55,898 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:56,399 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:56,899 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:57,400 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:57,901 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:57,901 - INFO - Detected device type: ats
2025-12-16 19:11:58,280 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=4351, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:11:58,282 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=4351
2025-12-16 19:11:58,416 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:58,941 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:11:59,469 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:11:59,711 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:11:59,712 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:11:59,712 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:11:59,713 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:11:59,713 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:11:59,970 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:00,482 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:01,001 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:01,526 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:02,047 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:02,531 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:12:02,531 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:12:02,531 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:12:02,532 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:12:02,532 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:12:02,532 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:12:02,532 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:12:02,532 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:12:02,532 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:12:02,533 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:12:02,533 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:12:02,533 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:12:02,533 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:12:02,534 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:02,534 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:02,534 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:12:02,535 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:12:02,535 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:12:02,535 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:12:02,535 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:12:02,535 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:12:02,535 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:12:02,536 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:12:02,536 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:12:02,536 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:12:02,536 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:12:02,536 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:12:02,536 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:12:02,537 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:12:02,537 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:12:02,537 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:12:02,537 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:12:02,537 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:12:02,537 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:12:02,538 - INFO - ================================================================================
2025-12-16 19:12:02,538 - INFO - UPS STATUS CHECK
2025-12-16 19:12:02,538 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:02,538 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:12:02,538 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:03,034 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:03,282 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=4707, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:03,282 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=4707
2025-12-16 19:12:03,535 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:04,035 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:04,536 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:05,036 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:05,537 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:05,553 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:12:05,553 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=5149)
2025-12-16 19:12:05,553 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:12:05,553 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:12:05,553 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:12:05,554 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:12:05,554 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:12:05,554 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:12:05,554 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:12:05,555 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:12:05,556 - INFO - [BUTTON] Config update result: True
2025-12-16 19:12:05,556 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:12:05,559 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:12:05,559 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:12:05,559 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:12:05,565 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:12:05,565 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:12:05,565 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:12:05,566 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:12:05,566 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:12:05,566 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:12:05,566 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:12:05,566 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:12:06,037 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:06,538 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:07,038 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:07,539 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:08,039 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:08,283 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=529, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:08,284 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=5680
2025-12-16 19:12:08,540 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:09,041 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:09,542 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:10,043 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:10,544 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:11,045 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:11,546 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:12,046 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:12,547 - INFO - Detected device type: ats
2025-12-16 19:12:12,548 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:13,104 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:13,287 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1373, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:13,288 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=6524
2025-12-16 19:12:13,635 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:14,169 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:14,358 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:12:14,359 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:12:14,359 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:12:14,359 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:12:14,359 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:12:14,697 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:15,209 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:15,736 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:16,259 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:16,787 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:17,216 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:12:17,216 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:12:17,216 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:12:17,217 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:12:17,217 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:12:17,217 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:12:17,217 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:12:17,217 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:12:17,218 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:12:17,218 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:12:17,218 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:12:17,218 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:12:17,218 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:12:17,219 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:17,219 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:17,220 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:12:17,220 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:12:17,220 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:12:17,221 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:12:17,221 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:12:17,221 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:12:17,221 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:12:17,221 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:12:17,222 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:12:17,222 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:12:17,222 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:12:17,222 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:12:17,223 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:12:17,223 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:12:17,223 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:12:17,224 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:12:17,224 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:12:17,384 - INFO - Continuous beep pattern stopped
2025-12-16 19:12:17,384 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:12:17,485 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:12:17,485 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:12:17,486 - INFO - ================================================================================
2025-12-16 19:12:17,486 - INFO - UPS STATUS CHECK
2025-12-16 19:12:17,486 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:17,486 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:12:17,487 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:17,720 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:18,220 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:18,287 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1778, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:18,288 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=6929
2025-12-16 19:12:18,721 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:19,221 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:19,722 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:20,222 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:20,723 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:21,223 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:21,723 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:22,224 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:22,724 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:23,225 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:23,289 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=2751, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:23,290 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=7902
2025-12-16 19:12:23,727 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:24,227 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:24,728 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:25,229 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:25,730 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:26,231 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:26,731 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:27,232 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:27,494 - INFO - Detected device type: ats
2025-12-16 19:12:27,763 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:28,252 - DEBUG - Using selector: EpollSelector
2025-12-16 19:12:28,291 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:28,291 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=3586, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:28,326 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=8737
2025-12-16 19:12:28,843 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:29,300 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:12:29,300 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:12:29,301 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:12:29,301 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:12:29,301 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:12:29,373 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:29,898 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:30,399 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:30,913 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:31,428 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:31,955 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:32,182 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:12:32,182 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:12:32,182 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:12:32,182 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:12:32,183 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:12:32,183 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:12:32,183 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:12:32,183 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:12:32,183 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:12:32,184 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:12:32,184 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:12:32,184 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:12:32,184 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:12:32,185 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:32,185 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:32,185 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:12:32,185 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:12:32,186 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:12:32,186 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:12:32,186 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:12:32,186 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:12:32,186 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:12:32,186 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:12:32,186 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:12:32,187 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:12:32,187 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:12:32,187 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:12:32,187 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:12:32,187 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:12:32,188 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:12:32,188 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:12:32,188 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:12:32,455 - INFO - Continuous beep pattern stopped
2025-12-16 19:12:32,456 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:12:32,557 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:12:32,557 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:12:32,557 - INFO - ================================================================================
2025-12-16 19:12:32,557 - INFO - UPS STATUS CHECK
2025-12-16 19:12:32,558 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:32,558 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:12:32,558 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:32,685 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:33,186 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:33,295 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=3990, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:33,296 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=9141
2025-12-16 19:12:33,686 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:34,187 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:34,687 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:35,188 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:35,688 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:36,188 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:36,689 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:37,189 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:37,690 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:38,191 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:38,298 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=4963, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:38,298 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=10114
2025-12-16 19:12:38,692 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:39,192 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:39,693 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:40,194 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:40,695 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:41,195 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:41,696 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:42,197 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:42,565 - INFO - Detected device type: ats
2025-12-16 19:12:42,700 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:43,227 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:43,304 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=5806, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:43,306 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=10957
2025-12-16 19:12:43,743 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:44,265 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:44,368 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:12:44,369 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:12:44,369 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:12:44,369 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:12:44,370 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:12:44,794 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:45,321 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:45,830 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:46,360 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:46,882 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:47,202 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:12:47,202 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:12:47,202 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:12:47,203 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:12:47,203 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:12:47,203 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:12:47,203 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:12:47,203 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:12:47,204 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:12:47,204 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:12:47,204 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:12:47,204 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:12:47,204 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:12:47,205 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:47,205 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:47,205 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:12:47,206 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:12:47,206 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:12:47,206 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:12:47,206 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:12:47,206 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:12:47,206 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:12:47,206 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:12:47,207 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:12:47,207 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:12:47,207 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:12:47,207 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:12:47,207 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:12:47,207 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:12:47,208 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:12:47,208 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:12:47,208 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:12:47,518 - INFO - Continuous beep pattern stopped
2025-12-16 19:12:47,519 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:12:47,619 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:12:47,620 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:12:47,620 - INFO - ================================================================================
2025-12-16 19:12:47,621 - INFO - UPS STATUS CHECK
2025-12-16 19:12:47,621 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:47,621 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:12:47,621 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:12:47,705 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:48,206 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:48,309 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=6214, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:48,309 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=11365
2025-12-16 19:12:48,706 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:49,207 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:49,707 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:50,207 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:50,708 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:51,208 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:51,709 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:52,209 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:52,710 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:53,211 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:53,314 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=7188, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:53,314 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=12339
2025-12-16 19:12:53,712 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:54,212 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:54,713 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:55,214 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:55,715 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:56,215 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:56,716 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:57,019 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:12:57,048 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:12:57,048 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:12:57,049 - DEBUG - State Reference: 434711 (type: int)
2025-12-16 19:12:57,050 - DEBUG - Callback Context type: list
2025-12-16 19:12:57,050 - DEBUG - Additional Args: (None,)
2025-12-16 19:12:57,050 - DEBUG - varBinds parameter count: 0
2025-12-16 19:12:57,051 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:12:57,051 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:12:57,051 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:12:57,052 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:12:57,052 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:12:57,053 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:12:57,053 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.034s)
2025-12-16 19:12:57,054 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:12:57,054 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:12:57,054 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:12:57,055 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:12:57,056 - DEBUG - Processing variable bindings...
2025-12-16 19:12:57,056 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1126423 timeticks (type: TimeTicks)
2025-12-16 19:12:57,057 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:57,057 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 (type: ObjectIdentifier)
2025-12-16 19:12:57,057 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 (type: ObjectIdentifier)
2025-12-16 19:12:57,058 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.16 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:12:57,058 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsCommunicationAbnormal
2025-12-16 19:12:57,058 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:57,059 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = ATS Normal (type: OctetString)
2025-12-16 19:12:57,059 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:12:57,059 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:57,060 - DEBUG - Processed 3 variables total
2025-12-16 19:12:57,060 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:12:57,061 - INFO - ================================================================================
Timestamp: 2025-12-16 19:12:57
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16
Trap Name: atsCommunicationAbnormal
Event Type:  ALARM TRIGGERED (trigger)
Severity:  CRITICAL (critical)
Description: SEVERE: Communication connection abnormal.
Will be cleared by: atsCommunicationToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1126423 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16
  1.3.6.1.4.1.37662.1.2.2.1.2: ATS Normal
================================================================================

2025-12-16 19:12:57,061 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:12:57,062 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:12:57,062 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16, battery_related: True
2025-12-16 19:12:57,062 - INFO - Trap name from OID: atsCommunicationAbnormal
2025-12-16 19:12:57,063 - INFO - Alarm severity: critical, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:12:57,063 - INFO - Triggered blinking LED on GPIO pin 17 for atsCommunicationAbnormal alarm
2025-12-16 19:12:57,064 - INFO - GPIO LED triggered on pin 17 for atsCommunicationAbnormal (critical) - ALARM TRIGGERED
2025-12-16 19:12:57,065 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:57,065 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:57,066 - INFO - Enabled LED 10 for alarm: atsCommunicationAbnormal (critical)
2025-12-16 19:12:57,566 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:57,630 - INFO - Detected device type: ats
2025-12-16 19:12:58,098 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:58,342 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=8036, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:12:58,342 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=13187
2025-12-16 19:12:58,611 - INFO - Playing critical beep (3x) for atsCommunicationAbnormal
2025-12-16 19:12:58,611 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:58,612 - INFO - Sound alert triggered for atsCommunicationAbnormal (critical)
2025-12-16 19:12:58,613 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:12:58,613 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:12:58,616 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:12:58,616 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:12:58,617 - DEBUG - State Reference: 434712 (type: int)
2025-12-16 19:12:58,617 - DEBUG - Callback Context type: list
2025-12-16 19:12:58,617 - DEBUG - Additional Args: (None,)
2025-12-16 19:12:58,618 - DEBUG - varBinds parameter count: 0
2025-12-16 19:12:58,618 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:12:58,618 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:12:58,618 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:12:58,619 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:12:58,619 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:12:58,619 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:12:58,619 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.006s)
2025-12-16 19:12:58,619 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:12:58,620 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:12:58,620 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:12:58,620 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:12:58,621 - DEBUG - Processing variable bindings...
2025-12-16 19:12:58,621 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1126423 timeticks (type: TimeTicks)
2025-12-16 19:12:58,621 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:58,621 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 (type: ObjectIdentifier)
2025-12-16 19:12:58,621 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 (type: ObjectIdentifier)
2025-12-16 19:12:58,621 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.17 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:12:58,621 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsEpoAlarm
2025-12-16 19:12:58,622 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:58,622 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Voltage Normal (type: OctetString)
2025-12-16 19:12:58,622 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:12:58,622 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:58,622 - DEBUG - Processed 3 variables total
2025-12-16 19:12:58,622 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:12:58,623 - CRITICAL - ================================================================================
Timestamp: 2025-12-16 19:12:58
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17
Trap Name: atsEpoAlarm
Event Type:  ALARM TRIGGERED (trigger)
Severity:  WARNING (warning)
Description: WARNING: EPO Alarm.
Will be cleared by: atsEpoToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1126423 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Voltage Normal
================================================================================

2025-12-16 19:12:58,623 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:12:58,623 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:12:58,623 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17, battery_related: True
2025-12-16 19:12:58,623 - INFO - Trap name from OID: atsEpoAlarm
2025-12-16 19:12:58,623 - INFO - Alarm severity: warning, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:12:58,624 - INFO - Triggered blinking LED on GPIO pin 17 for atsEpoAlarm alarm
2025-12-16 19:12:58,625 - INFO - GPIO LED triggered on pin 17 for atsEpoAlarm (warning) - ALARM TRIGGERED
2025-12-16 19:12:58,625 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:58,625 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:12:58,626 - INFO - Enabled LED 10 for alarm: atsEpoAlarm (warning)
2025-12-16 19:12:59,135 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:12:59,449 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:12:59,450 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:12:59,450 - DEBUG - Extracted Source A status: 'ok' (raw: ok)
2025-12-16 19:12:59,450 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:12:59,450 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:12:59,664 - INFO - Playing warning beep (2x) for atsEpoAlarm
2025-12-16 19:12:59,665 - INFO - Sound alert triggered for atsEpoAlarm (warning)
2025-12-16 19:12:59,665 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:59,665 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:12:59,701 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:12:59,704 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:12:59,705 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:12:59,706 - DEBUG - State Reference: 434713 (type: int)
2025-12-16 19:12:59,706 - DEBUG - Callback Context type: list
2025-12-16 19:12:59,706 - DEBUG - Additional Args: (None,)
2025-12-16 19:12:59,707 - DEBUG - varBinds parameter count: 0
2025-12-16 19:12:59,707 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:12:59,708 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:12:59,708 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:12:59,709 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:12:59,709 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:12:59,709 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:12:59,710 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.009s)
2025-12-16 19:12:59,710 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:12:59,710 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:12:59,711 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:12:59,711 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:12:59,712 - DEBUG - Processing variable bindings...
2025-12-16 19:12:59,712 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1126673 timeticks (type: TimeTicks)
2025-12-16 19:12:59,712 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:59,717 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 (type: ObjectIdentifier)
2025-12-16 19:12:59,717 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 (type: ObjectIdentifier)
2025-12-16 19:12:59,718 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.19 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:12:59,718 - INFO -   -> snmpTrapOID matches known UPS trap: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:12:59,718 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:59,718 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Frequency Normal (type: OctetString)
2025-12-16 19:12:59,718 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:12:59,719 - DEBUG -   -> Stored as generic variable
2025-12-16 19:12:59,719 - DEBUG - Processed 3 variables total
2025-12-16 19:12:59,719 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:12:59,719 - INFO - ================================================================================
Timestamp: 2025-12-16 19:12:59
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19
Trap Name: atsSourceAfrequencyAbnormalToNormal
Event Type:  ALARM CLEARED/RESUMED (resumption)
Severity:  INFO (info)
Description: INFORMATION: Source A Frequency Normal.
Clears Alarm(s): atsSourceAfrequencyAbnormal
Variables:
  1.3.6.1.2.1.1.3.0: 1126673 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Frequency Normal
================================================================================

2025-12-16 19:12:59,723 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:12:59,723 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:12:59,724 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19, battery_related: True
2025-12-16 19:12:59,724 - INFO - Trap name from OID: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:12:59,724 - INFO - Alarm severity: info, Event type: resumption, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:12:59,725 - INFO - Resumption event 'atsSourceAfrequencyAbnormalToNormal' clears alarm(s): atsSourceAfrequencyAbnormal
2025-12-16 19:12:59,726 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:12:59,726 - INFO - Disabled LED 10 (ALARM, Red) on GPIO pin 12
2025-12-16 19:12:59,726 - INFO - Disabled LED 10 (red alarm LED) for resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:12:59,727 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:12:59,727 - INFO - Enabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:12:59,728 - INFO - Enabled LED 2 (green normal LED) for resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:12:59,763 - INFO - Cleared LED on GPIO pin 17 for warning alarm
2025-12-16 19:12:59,764 - INFO - GPIO LED cleared for 'atsSourceAfrequencyAbnormal' (warning) - resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:12:59,764 - DEBUG - Resumption event 'atsSourceAfrequencyAbnormalToNormal' - no sound alert
2025-12-16 19:12:59,764 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:13:02,310 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:13:02,311 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:13:02,311 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:13:02,311 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:13:02,312 - INFO - Enabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:02,312 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:13:02,312 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:13:02,312 - DEBUG - Source A Status: ok - Enabled LEDs 2, 9
2025-12-16 19:13:02,312 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:13:02,312 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:13:02,313 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:13:02,313 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:13:02,313 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:13:02,313 - DEBUG - GPIO pin 22 set to ON (active_high: True)
2025-12-16 19:13:02,313 - INFO - Enabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:02,313 - DEBUG - GPIO pin 16 set to ON (active_high: True)
2025-12-16 19:13:02,313 - INFO - Enabled LED 8 (SYSTEM OK, Green) on GPIO pin 16
2025-12-16 19:13:02,314 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:02,314 - INFO - Disabled LED 10 (ALARM, Red) on GPIO pin 12
2025-12-16 19:13:02,314 - DEBUG - Both sources ok - Enabled LEDs 3, 8, Disabled LED 10
2025-12-16 19:13:02,314 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:13:02,314 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:13:02,314 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:02,314 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:02,314 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:13:02,315 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:13:02,315 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:13:02,315 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:13:02,315 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:13:02,315 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:13:02,315 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:13:02,315 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:13:02,315 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:13:02,316 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:13:02,316 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:13:02,316 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:13:02,573 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:02,574 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:02,574 - INFO - LED 10 disabled and LED 8 enabled - Buzzer disabled
2025-12-16 19:13:02,575 - INFO - Updated ALARM_STATUS in config.py to False
2025-12-16 19:13:02,591 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:02,592 - INFO - LED 10 changed from enabled to disabled -> ALARM_STATUS = False, BUZZER_MUTED = False
2025-12-16 19:13:02,592 - INFO - ================================================================================
2025-12-16 19:13:02,592 - INFO - UPS STATUS CHECK
2025-12-16 19:13:02,592 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:02,592 - INFO - Source A Status: ok | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:13:02,592 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:03,347 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=8440, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:03,347 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=13591
2025-12-16 19:13:08,347 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=9413, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:08,347 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=14564
2025-12-16 19:13:09,048 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:13:09,053 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:13:09,054 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:13:09,055 - DEBUG - State Reference: 434714 (type: int)
2025-12-16 19:13:09,055 - DEBUG - Callback Context type: list
2025-12-16 19:13:09,055 - DEBUG - Additional Args: (None,)
2025-12-16 19:13:09,055 - DEBUG - varBinds parameter count: 0
2025-12-16 19:13:09,056 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:13:09,056 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:13:09,056 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:13:09,057 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:13:09,057 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:13:09,058 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:13:09,058 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.010s)
2025-12-16 19:13:09,059 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:13:09,059 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:13:09,059 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:13:09,060 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:13:09,060 - DEBUG - Processing variable bindings...
2025-12-16 19:13:09,061 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1127626 timeticks (type: TimeTicks)
2025-12-16 19:13:09,061 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:09,061 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.1 (type: ObjectIdentifier)
2025-12-16 19:13:09,062 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.1 (type: ObjectIdentifier)
2025-12-16 19:13:09,062 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.1 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.1 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:13:09,062 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsAtsAlarm
2025-12-16 19:13:09,062 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:09,063 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = ATS Alarm (type: OctetString)
2025-12-16 19:13:09,063 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:13:09,063 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:09,064 - DEBUG - Processed 3 variables total
2025-12-16 19:13:09,064 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.1, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:13:09,065 - CRITICAL - ================================================================================
Timestamp: 2025-12-16 19:13:09
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.1
Trap Name: atsAtsAlarm
Event Type:  ALARM TRIGGERED (trigger)
Severity:  WARNING (warning)
Description: WARNING: ATS Alarm.
Will be cleared by: atsAtsAlarmToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1127626 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.1
  1.3.6.1.4.1.37662.1.2.2.1.2: ATS Alarm
================================================================================

2025-12-16 19:13:09,066 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:13:09,066 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:13:09,066 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.1, battery_related: True
2025-12-16 19:13:09,066 - INFO - Trap name from OID: atsAtsAlarm
2025-12-16 19:13:09,067 - INFO - Alarm severity: warning, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:13:09,068 - INFO - Triggered blinking LED on GPIO pin 17 for atsAtsAlarm alarm
2025-12-16 19:13:09,068 - INFO - GPIO LED triggered on pin 17 for atsAtsAlarm (warning) - ALARM TRIGGERED
2025-12-16 19:13:09,069 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:09,069 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:09,070 - INFO - Enabled LED 10 for alarm: atsAtsAlarm (warning)
2025-12-16 19:13:09,570 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:10,070 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:10,074 - INFO - Playing warning beep (2x) for atsAtsAlarm
2025-12-16 19:13:10,075 - INFO - Sound alert triggered for atsAtsAlarm (warning)
2025-12-16 19:13:10,075 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:13:10,075 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:13:10,081 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:13:10,082 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:13:10,082 - DEBUG - State Reference: 434715 (type: int)
2025-12-16 19:13:10,082 - DEBUG - Callback Context type: list
2025-12-16 19:13:10,083 - DEBUG - Additional Args: (None,)
2025-12-16 19:13:10,083 - DEBUG - varBinds parameter count: 0
2025-12-16 19:13:10,083 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:13:10,083 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:13:10,084 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:13:10,084 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:13:10,085 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:13:10,085 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:13:10,085 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.010s)
2025-12-16 19:13:10,086 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:13:10,086 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:13:10,086 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:13:10,087 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:13:10,087 - DEBUG - Processing variable bindings...
2025-12-16 19:13:10,088 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1127627 timeticks (type: TimeTicks)
2025-12-16 19:13:10,088 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:10,089 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.2 (type: ObjectIdentifier)
2025-12-16 19:13:10,089 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.2 (type: ObjectIdentifier)
2025-12-16 19:13:10,089 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.2 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.2 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:13:10,089 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsSourceAvoltageAbnormal
2025-12-16 19:13:10,090 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:10,090 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Voltage Abnormal (type: OctetString)
2025-12-16 19:13:10,090 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:13:10,091 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:10,091 - DEBUG - Processed 3 variables total
2025-12-16 19:13:10,091 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.2, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:13:10,092 - INFO - ================================================================================
Timestamp: 2025-12-16 19:13:10
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.2
Trap Name: atsSourceAvoltageAbnormal
Event Type:  ALARM TRIGGERED (trigger)
Severity:  WARNING (warning)
Description: WARNING: Source A Voltage Abnormal.
Will be cleared by: atsSourceAvoltageAbnormalToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1127627 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.2
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Voltage Abnormal
================================================================================

2025-12-16 19:13:10,093 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:13:10,093 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:13:10,093 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.2, battery_related: True
2025-12-16 19:13:10,094 - INFO - Trap name from OID: atsSourceAvoltageAbnormal
2025-12-16 19:13:10,094 - INFO - Alarm severity: warning, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:13:10,095 - INFO - Triggered blinking LED on GPIO pin 17 for atsSourceAvoltageAbnormal alarm
2025-12-16 19:13:10,096 - INFO - GPIO LED triggered on pin 17 for atsSourceAvoltageAbnormal (warning) - ALARM TRIGGERED
2025-12-16 19:13:10,096 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:13:10,097 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:10,097 - INFO - Disabled LED 2 for alarm: atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:10,098 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:10,098 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:10,099 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:10,099 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=9744)
2025-12-16 19:13:10,099 - INFO - Disabled LED 6 for alarm: atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:10,100 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:10,100 - DEBUG - GPIO pin 16 set to OFF (active_high: True)
2025-12-16 19:13:10,101 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:10,101 - INFO - Disabled LED 8 (SYSTEM OK, Green) on GPIO pin 16
2025-12-16 19:13:10,102 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:10,102 - INFO - Disabled LED 8 for alarm: atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:10,103 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:10,103 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:13:10,104 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:10,104 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:10,104 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:10,105 - INFO - Disabled LED 3 for alarm: atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:10,105 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:10,107 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:10,107 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:10,109 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:10,110 - INFO - Enabled LED 10 for alarm: atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:10,110 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:10,111 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:10,112 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:10,112 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:10,113 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:10,119 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:10,119 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:10,120 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:10,120 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:10,121 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:10,121 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:10,121 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:10,121 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:10,189 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:10,190 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=12)
2025-12-16 19:13:10,190 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:10,190 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:10,191 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:10,191 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:10,191 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:10,191 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:13:10,191 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:13:10,193 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:10,193 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:10,193 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:13:10,197 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:10,198 - DEBUG - Buzzer disabled (unmuted but ALARM_STATUS=False)
2025-12-16 19:13:10,198 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:10,345 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:10,345 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=27)
2025-12-16 19:13:10,345 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:10,346 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:10,346 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:10,346 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:10,347 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:10,347 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:10,610 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:11,111 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:11,117 - INFO - Playing warning beep (2x) for atsSourceAvoltageAbnormal
2025-12-16 19:13:11,117 - INFO - Sound alert triggered for atsSourceAvoltageAbnormal (warning)
2025-12-16 19:13:11,118 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:13:11,548 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:13:11,554 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:13:11,555 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:13:11,555 - DEBUG - State Reference: 434716 (type: int)
2025-12-16 19:13:11,555 - DEBUG - Callback Context type: list
2025-12-16 19:13:11,556 - DEBUG - Additional Args: (None,)
2025-12-16 19:13:11,556 - DEBUG - varBinds parameter count: 0
2025-12-16 19:13:11,557 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:13:11,557 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:13:11,557 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:13:11,558 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:13:11,558 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:13:11,559 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:13:11,559 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.011s)
2025-12-16 19:13:11,560 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:13:11,560 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:13:11,561 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:13:11,561 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:13:11,562 - DEBUG - Processing variable bindings...
2025-12-16 19:13:11,562 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1127877 timeticks (type: TimeTicks)
2025-12-16 19:13:11,563 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:11,563 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.4 (type: ObjectIdentifier)
2025-12-16 19:13:11,563 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.4 (type: ObjectIdentifier)
2025-12-16 19:13:11,564 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.4 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.4 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:13:11,564 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsSourceAfrequencyAbnormal
2025-12-16 19:13:11,565 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:11,565 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Frequency Abnormal (type: OctetString)
2025-12-16 19:13:11,566 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:13:11,566 - DEBUG -   -> Stored as generic variable
2025-12-16 19:13:11,566 - DEBUG - Processed 3 variables total
2025-12-16 19:13:11,567 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.4, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:13:11,567 - INFO - ================================================================================
Timestamp: 2025-12-16 19:13:11
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.4
Trap Name: atsSourceAfrequencyAbnormal
Event Type:  ALARM TRIGGERED (trigger)
Severity:  WARNING (warning)
Description: WARNING: Source A Frequency Abnormal.
Will be cleared by: atsSourceAfrequencyAbnormalToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1127877 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.4
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Frequency Abnormal
================================================================================

2025-12-16 19:13:11,568 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:13:11,568 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:13:11,569 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.4, battery_related: True
2025-12-16 19:13:11,569 - INFO - Trap name from OID: atsSourceAfrequencyAbnormal
2025-12-16 19:13:11,569 - INFO - Alarm severity: warning, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:13:11,571 - INFO - Triggered blinking LED on GPIO pin 17 for atsSourceAfrequencyAbnormal alarm
2025-12-16 19:13:11,571 - INFO - GPIO LED triggered on pin 17 for atsSourceAfrequencyAbnormal (warning) - ALARM TRIGGERED
2025-12-16 19:13:11,572 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:13:11,572 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:11,573 - INFO - Disabled LED 2 for alarm: atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:11,573 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:11,574 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:11,574 - INFO - Disabled LED 6 for alarm: atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:11,574 - DEBUG - GPIO pin 16 set to OFF (active_high: True)
2025-12-16 19:13:11,575 - INFO - Disabled LED 8 (SYSTEM OK, Green) on GPIO pin 16
2025-12-16 19:13:11,575 - INFO - Disabled LED 8 for alarm: atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:11,576 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:13:11,576 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:11,577 - INFO - Disabled LED 3 for alarm: atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:11,578 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:11,578 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:11,579 - INFO - Enabled LED 10 for alarm: atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:12,079 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:12,580 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:12,584 - INFO - Playing warning beep (2x) for atsSourceAfrequencyAbnormal
2025-12-16 19:13:12,584 - INFO - Sound alert triggered for atsSourceAfrequencyAbnormal (warning)
2025-12-16 19:13:12,585 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:13:12,600 - INFO - Detected device type: ats
2025-12-16 19:13:13,086 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:13,348 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=460, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:13,349 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=15398
2025-12-16 19:13:13,602 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:14,122 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:14,427 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:13:14,428 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:13:14,428 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:13:14,428 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:13:14,429 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:13:14,643 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:15,167 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:15,695 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:15,781 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:15,781 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=575)
2025-12-16 19:13:15,781 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:15,782 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:15,782 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:15,782 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:15,782 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:15,783 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:15,783 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:15,819 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:15,820 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:15,820 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:15,821 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:15,821 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:15,822 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:16,222 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:16,257 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:16,258 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=20)
2025-12-16 19:13:16,258 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:16,259 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:16,259 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:16,259 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:16,259 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:16,259 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:16,751 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:17,252 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:17,273 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:13:17,273 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:13:17,273 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:13:17,274 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:13:17,274 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:17,274 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:13:17,274 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:17,274 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:13:17,274 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:13:17,274 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:13:17,275 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:13:17,275 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:13:17,275 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:13:17,275 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:17,276 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:17,276 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:13:17,276 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:13:17,276 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:13:17,277 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:17,277 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:17,277 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:13:17,277 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:13:17,277 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:13:17,277 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:13:17,277 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:13:17,277 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:13:17,278 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:13:17,278 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:13:17,278 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:13:17,278 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:13:17,278 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:13:17,278 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:13:17,278 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:17,279 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:13:17,280 - INFO - Updated ALARM_STATUS in config.py to True
2025-12-16 19:13:17,280 - INFO - LED 10 changed from disabled to enabled -> ALARM_STATUS = True
2025-12-16 19:13:17,280 - INFO - ================================================================================
2025-12-16 19:13:17,280 - INFO - UPS STATUS CHECK
2025-12-16 19:13:17,280 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:17,281 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:13:17,281 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:17,776 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:18,276 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:18,352 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=263, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:18,352 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=15798
2025-12-16 19:13:18,777 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:19,277 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:19,777 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:19,777 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=540)
2025-12-16 19:13:19,777 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:19,777 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:19,777 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:19,778 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:19,778 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:19,778 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:13:19,778 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:13:19,778 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:19,779 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:19,780 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:19,780 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:13:19,782 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:13:19,783 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:13:19,783 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:19,788 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:19,789 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:19,789 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:19,789 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:19,789 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:19,789 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:19,789 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:19,790 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:20,279 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:20,779 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:21,280 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:21,780 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:22,281 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:22,782 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:23,282 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:23,356 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=693, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:23,356 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=16770
2025-12-16 19:13:23,783 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:24,284 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:24,785 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:25,286 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:25,287 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:25,287 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=1060)
2025-12-16 19:13:25,288 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:25,288 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:25,288 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:25,289 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:25,289 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:25,289 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:25,290 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:25,292 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:25,292 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:25,293 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:25,435 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:25,436 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:25,436 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:25,436 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:25,442 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:25,443 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:25,443 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:25,443 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:25,444 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:25,444 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:25,445 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:25,445 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:25,786 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:26,287 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:26,788 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:27,289 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:27,289 - INFO - Detected device type: ats
2025-12-16 19:13:27,829 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:28,285 - DEBUG - Using selector: EpollSelector
2025-12-16 19:13:28,358 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:28,358 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:28,364 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=399)
2025-12-16 19:13:28,365 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:28,365 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:28,366 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:28,366 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:28,367 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:28,367 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:13:28,368 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:13:28,370 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:28,371 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:28,371 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:13:28,378 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:13:28,382 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:13:28,382 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:28,383 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=0 (pressed=True), last_state=0, unchanged_count=0, consecutive_errors=0, time_since_last_success=0.02s
2025-12-16 19:13:28,383 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=17539
2025-12-16 19:13:28,420 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:28,421 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:28,421 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:28,422 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:28,422 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:28,458 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:28,459 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:28,459 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:28,862 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:29,088 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:13:29,088 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:13:29,089 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:13:29,089 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:13:29,089 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:13:29,390 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:29,906 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:30,436 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:30,961 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:31,483 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:31,483 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:31,488 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=147)
2025-12-16 19:13:31,491 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:31,491 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:31,491 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:31,491 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:31,492 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:31,499 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:31,499 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:31,499 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:31,499 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:31,500 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:31,500 - INFO - [BUTTON] Mute button: Ignoring duplicate state (time_since_last=0.009s < 0.01s)
2025-12-16 19:13:31,500 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:31,958 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:13:31,958 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:13:31,958 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:13:31,958 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:13:31,959 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:31,959 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:13:31,959 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:31,959 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:13:31,959 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:13:31,959 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:13:31,959 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:13:31,960 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:13:31,960 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:13:31,960 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:31,960 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:31,961 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:13:31,961 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:13:31,961 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:13:31,961 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:31,961 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:31,961 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:13:31,962 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:13:31,962 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:13:31,962 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:13:31,962 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:13:31,962 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:13:31,962 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:13:31,962 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:13:31,962 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:13:31,963 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:13:31,963 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:13:31,963 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:13:32,127 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:32,128 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:32,229 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:13:32,229 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:13:32,229 - INFO - ================================================================================
2025-12-16 19:13:32,229 - INFO - UPS STATUS CHECK
2025-12-16 19:13:32,229 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:32,230 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:13:32,230 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:32,461 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:32,961 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:33,383 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=303, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:33,383 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=17992
2025-12-16 19:13:33,462 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:33,962 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:34,463 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:34,963 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:35,464 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:35,964 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:35,966 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:35,966 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=806)
2025-12-16 19:13:35,966 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:35,966 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:35,967 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:35,967 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:35,967 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:35,967 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:35,967 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:35,968 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:35,969 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:35,969 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:36,465 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:36,469 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:36,469 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:36,470 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:36,475 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:36,475 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:36,475 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:36,476 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:36,476 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:36,476 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:36,476 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:36,477 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:36,480 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:36,965 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:37,466 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:37,966 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:38,386 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=368, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:38,387 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=18865
2025-12-16 19:13:38,467 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:38,968 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:39,470 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:39,970 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:40,471 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:40,972 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:41,473 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:41,974 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:42,237 - INFO - Detected device type: ats
2025-12-16 19:13:42,507 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:43,077 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:43,390 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1153, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:43,391 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=19650
2025-12-16 19:13:43,599 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:44,058 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:13:44,059 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:13:44,059 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:13:44,059 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:13:44,060 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:13:44,133 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:44,134 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:44,135 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=1187)
2025-12-16 19:13:44,135 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:44,136 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:44,136 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:44,137 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:44,137 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:44,138 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:13:44,138 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:13:44,140 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:44,141 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:44,141 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:13:44,149 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:13:44,149 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:13:44,153 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:44,454 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:44,455 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=13)
2025-12-16 19:13:44,455 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:44,456 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:44,456 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:44,456 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:44,491 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:44,495 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:44,635 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:45,167 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:45,668 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:46,192 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:46,200 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:46,201 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=82)
2025-12-16 19:13:46,201 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:46,201 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:46,202 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:46,202 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:46,202 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:46,202 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:46,202 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:46,207 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:46,208 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:46,208 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:46,422 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:46,422 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:46,423 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:46,423 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:46,458 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:46,459 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:46,460 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:46,460 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:46,461 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:46,461 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:46,462 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:46,462 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:46,724 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:46,951 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:13:46,951 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:13:46,952 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:13:46,952 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:13:46,952 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:13:46,952 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:13:46,952 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:13:46,952 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:13:46,953 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:13:46,953 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:13:46,953 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:13:46,953 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:13:46,953 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:13:46,954 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:46,954 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:13:46,954 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:13:46,954 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:13:46,954 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:13:46,955 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:13:46,955 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:13:46,955 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:13:46,955 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:13:46,955 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:13:46,955 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:13:46,955 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:13:46,956 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:13:46,956 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:13:46,956 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:13:46,956 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:13:46,956 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:13:46,956 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:13:46,956 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:13:46,957 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:46,957 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:13:46,957 - INFO - ================================================================================
2025-12-16 19:13:46,957 - INFO - UPS STATUS CHECK
2025-12-16 19:13:46,957 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:46,957 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:13:46,957 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:13:47,454 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:47,955 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:47,959 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:47,960 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=225)
2025-12-16 19:13:47,960 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:47,960 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:47,960 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:47,960 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:47,961 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:47,961 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:13:47,961 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:13:47,962 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:13:47,962 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:47,962 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:13:47,975 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:13:47,975 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:13:47,976 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:48,155 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:48,156 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=34)
2025-12-16 19:13:48,156 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:48,156 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:48,156 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:48,156 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:48,157 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:48,157 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:48,393 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=46, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:48,393 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=20090
2025-12-16 19:13:48,455 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:48,955 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:49,456 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:49,956 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:50,457 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:50,957 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:51,288 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:13:51,289 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=610)
2025-12-16 19:13:51,289 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:51,289 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:51,289 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:13:51,289 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:13:51,289 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:13:51,290 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:13:51,290 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:13:51,291 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:13:51,291 - INFO - [BUTTON] Config update result: True
2025-12-16 19:13:51,291 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:13:51,457 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:51,526 - INFO - Continuous beep pattern stopped
2025-12-16 19:13:51,527 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:13:51,527 - INFO - Buzzer disabled (muted)
2025-12-16 19:13:51,527 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:51,533 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:13:51,533 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:13:51,533 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:13:51,533 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:13:51,534 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:13:51,534 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:13:51,534 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:13:51,534 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:13:51,958 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:52,459 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:52,960 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:53,398 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=359, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:53,398 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=21015
2025-12-16 19:13:53,461 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:53,961 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:54,462 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:54,963 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:55,463 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:55,964 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:56,465 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:56,966 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:56,966 - INFO - Detected device type: ats
2025-12-16 19:13:57,483 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:57,985 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:58,427 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1102, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:13:58,428 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=21758
2025-12-16 19:13:58,514 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:13:58,795 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:13:58,796 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:13:58,796 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:13:58,796 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:13:58,797 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:13:59,047 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:13:59,573 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:00,105 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:00,631 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:01,161 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:01,679 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:01,704 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:14:01,704 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:14:01,704 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:14:01,705 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:14:01,705 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:14:01,705 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:14:01,705 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:14:01,705 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:14:01,705 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:14:01,705 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:14:01,706 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:14:01,706 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:14:01,706 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:14:01,706 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:01,707 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:01,707 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:14:01,707 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:14:01,707 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:14:01,707 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:14:01,707 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:14:01,708 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:14:01,708 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:14:01,708 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:14:01,708 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:14:01,708 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:14:01,708 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:14:01,709 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:14:01,709 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:14:01,709 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:14:01,709 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:14:01,709 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:14:01,709 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:14:01,709 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:01,709 - INFO - LED 10 enabled - Buzzer is MUTED (alarm LEDs active, but no sound)
2025-12-16 19:14:01,710 - INFO - ================================================================================
2025-12-16 19:14:01,710 - INFO - UPS STATUS CHECK
2025-12-16 19:14:01,710 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:01,710 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:14:01,710 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:02,207 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:02,707 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:03,208 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:03,430 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1597, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:03,430 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=22253
2025-12-16 19:14:03,708 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:04,209 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:04,709 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:04,711 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:04,711 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=1846)
2025-12-16 19:14:04,712 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:04,712 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:04,712 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:04,712 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:04,712 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:04,712 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:04,713 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:04,714 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:04,714 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:04,714 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:04,738 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:04,738 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:04,738 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:04,872 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:04,872 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=25)
2025-12-16 19:14:04,872 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:04,872 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:04,872 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:04,872 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:04,873 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:04,873 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:04,970 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:04,971 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=18)
2025-12-16 19:14:04,971 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:04,971 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:04,971 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:04,971 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:04,971 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:04,971 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:04,972 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:04,973 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:04,973 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:04,973 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:05,210 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:05,473 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:05,474 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:05,474 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:05,479 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:05,479 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:05,479 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:05,479 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:05,480 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:05,480 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:05,480 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:05,480 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:05,488 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:05,710 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:06,211 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:06,711 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:07,212 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:07,713 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:07,713 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:07,714 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=432)
2025-12-16 19:14:07,714 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:07,715 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:07,715 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:07,716 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:07,716 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:07,716 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:07,716 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:07,719 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:07,719 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:07,719 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:07,732 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:07,732 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:07,733 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:07,744 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:07,745 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=1)
2025-12-16 19:14:07,745 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:07,745 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:07,746 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:07,746 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:07,746 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:07,747 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:08,214 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:08,434 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=131, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:08,434 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=23115
2025-12-16 19:14:08,715 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:09,215 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:09,716 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:10,217 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:10,718 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:10,718 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:10,719 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=566)
2025-12-16 19:14:10,719 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:10,720 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:10,720 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:10,721 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:10,721 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:10,721 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:10,722 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:10,724 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:10,725 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:10,725 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:10,784 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:10,785 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:10,785 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:10,786 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:10,791 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:10,792 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:10,792 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:10,792 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:10,793 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:10,793 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:10,793 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:10,794 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:11,219 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:11,718 - INFO - Detected device type: ats
2025-12-16 19:14:11,720 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:12,230 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:12,731 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:12,736 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:12,736 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=220)
2025-12-16 19:14:12,737 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:12,737 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:12,738 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:12,739 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:12,739 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:12,740 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:12,740 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:12,776 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:12,776 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:12,776 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:12,815 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:12,815 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:12,816 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:12,822 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:12,823 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:12,823 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:12,824 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:12,824 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:12,824 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:12,825 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:12,825 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:13,250 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:13,438 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=31, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:13,438 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=23805
2025-12-16 19:14:13,524 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:14:13,525 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:14:13,525 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:14:13,525 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:14:13,526 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:14:13,776 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:14,303 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:14,828 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:15,338 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:15,864 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:16,353 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:14:16,354 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:14:16,354 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:14:16,354 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:14:16,354 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:14:16,354 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:14:16,354 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:14:16,354 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:14:16,355 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:14:16,355 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:14:16,355 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:14:16,355 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:14:16,355 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:14:16,356 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:16,356 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:16,356 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:14:16,356 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:14:16,356 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:14:16,357 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:14:16,357 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:14:16,357 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:14:16,357 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:14:16,357 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:14:16,357 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:14:16,357 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:14:16,357 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:14:16,358 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:14:16,358 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:14:16,358 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:14:16,358 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:14:16,358 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:14:16,358 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:14:16,534 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:16,535 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:16,636 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:16,636 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:14:16,636 - INFO - ================================================================================
2025-12-16 19:14:16,636 - INFO - UPS STATUS CHECK
2025-12-16 19:14:16,637 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:16,637 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:14:16,637 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:16,856 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:17,357 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:17,857 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:18,358 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:18,439 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=582, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:18,439 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=24356
2025-12-16 19:14:18,858 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:19,359 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:19,859 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:20,360 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:20,362 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:20,362 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=956)
2025-12-16 19:14:20,362 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:20,362 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:20,363 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:20,363 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:20,363 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:20,363 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:20,363 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:20,365 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:20,365 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:20,365 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:20,860 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:20,866 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:20,866 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:20,866 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:20,871 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:20,872 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:20,872 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:20,872 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:20,872 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:20,873 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:20,873 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:20,873 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:20,887 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:21,361 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:21,861 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:22,362 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:22,366 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:22,367 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=288)
2025-12-16 19:14:22,367 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:22,367 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:22,368 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:22,368 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:22,368 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:22,369 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:22,369 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:22,371 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:22,372 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:22,372 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:22,377 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:22,378 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:22,378 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:22,384 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:22,385 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:22,385 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:22,385 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:22,386 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:22,386 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:22,386 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:22,387 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:22,863 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:23,363 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:23,440 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=201, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:23,440 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=25223
2025-12-16 19:14:23,864 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:24,365 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:24,599 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:24,599 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=421)
2025-12-16 19:14:24,600 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:24,600 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:24,600 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:24,601 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:24,601 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:24,601 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:24,602 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:24,604 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:24,604 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:24,605 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:24,729 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:24,730 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:24,730 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:24,731 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:24,736 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:24,737 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:24,737 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:24,738 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:24,738 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:24,738 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:24,739 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:24,739 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:24,866 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:25,367 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:25,867 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:26,368 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:26,369 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:26,370 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=310)
2025-12-16 19:14:26,370 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:26,370 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:26,371 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:26,371 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:26,371 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:26,372 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:26,372 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:26,374 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:26,375 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:26,375 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:26,381 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:26,381 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:26,382 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:26,482 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:26,482 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=18)
2025-12-16 19:14:26,483 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:26,483 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:26,483 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:26,484 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:26,484 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:26,484 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:26,516 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:26,517 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=5)
2025-12-16 19:14:26,517 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:26,517 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:26,517 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:26,518 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:26,518 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:26,524 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:26,524 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:26,524 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:26,525 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:26,527 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:26,527 - INFO - [BUTTON] Mute button: Ignoring duplicate state (time_since_last=0.010s < 0.01s)
2025-12-16 19:14:26,528 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:26,645 - INFO - Detected device type: ats
2025-12-16 19:14:26,869 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:27,373 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:27,905 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:28,384 - DEBUG - Using selector: EpollSelector
2025-12-16 19:14:28,421 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:28,457 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=106, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:28,457 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=25888
2025-12-16 19:14:28,471 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:14:28,472 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:14:28,472 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:14:28,472 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:14:28,473 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:14:28,948 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:29,476 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:29,997 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:30,520 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:31,023 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:31,308 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:14:31,308 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:14:31,309 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:14:31,309 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:14:31,309 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:14:31,309 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:14:31,309 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:14:31,309 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:14:31,309 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:14:31,310 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:14:31,310 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:14:31,310 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:14:31,310 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:14:31,311 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:31,311 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:31,311 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:14:31,311 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:14:31,311 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:14:31,312 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:14:31,312 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:14:31,312 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:14:31,312 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:14:31,312 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:14:31,312 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:14:31,312 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:14:31,313 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:14:31,313 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:14:31,313 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:14:31,313 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:14:31,313 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:14:31,313 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:14:31,313 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:14:31,316 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:31,316 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=248)
2025-12-16 19:14:31,316 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:31,316 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:31,316 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:31,317 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:31,317 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:31,317 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:31,317 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:31,318 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:31,318 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:31,318 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:31,516 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:31,516 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:31,516 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:31,517 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:31,517 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:31,522 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:31,522 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:31,522 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:31,523 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:31,523 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:31,523 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:31,523 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:31,523 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:31,617 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:31,617 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:14:31,617 - INFO - ================================================================================
2025-12-16 19:14:31,618 - INFO - UPS STATUS CHECK
2025-12-16 19:14:31,618 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:31,618 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:14:31,618 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:31,811 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:32,312 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:32,812 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:33,313 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:33,316 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:33,317 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=349)
2025-12-16 19:14:33,317 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:33,317 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:33,317 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:33,317 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:33,317 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:33,317 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:33,318 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:33,319 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:33,319 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:33,319 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:33,768 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:33,769 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:33,813 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:33,869 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:33,869 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:33,870 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:33,870 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=0 (pressed=True), last_state=0, unchanged_count=0, consecutive_errors=0, time_since_last_success=0.55s
2025-12-16 19:14:33,870 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=26382
2025-12-16 19:14:33,870 - WARNING - [BUTTON] Mute GPIO read inconsistency: current_state=0, verify_read=1
2025-12-16 19:14:33,876 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:33,876 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:33,876 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:33,876 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:33,877 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:33,877 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:33,877 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:33,877 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:34,313 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:34,814 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:35,314 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:35,815 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:36,315 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:36,816 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:37,317 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:37,818 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:38,319 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:38,386 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:38,386 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=872)
2025-12-16 19:14:38,386 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:38,387 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:38,387 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:38,387 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:38,388 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:38,388 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from False to True
2025-12-16 19:14:38,388 - INFO - [BUTTON] Calling _update_buzzer_muted_config(True)...
2025-12-16 19:14:38,390 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to True (file written successfully)
2025-12-16 19:14:38,391 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:38,391 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from False to True (config.py updated successfully)
2025-12-16 19:14:38,820 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:38,821 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:38,822 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:38,822 - INFO - Buzzer disabled (muted)
2025-12-16 19:14:38,823 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:38,828 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:38,829 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=0)
2025-12-16 19:14:38,829 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:38,830 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:38,830 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:38,831 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:38,831 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:38,832 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:38,874 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=8, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:38,875 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=27265
2025-12-16 19:14:39,321 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:39,821 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:40,322 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:40,823 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:41,324 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:41,626 - INFO - Detected device type: ats
2025-12-16 19:14:41,835 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:42,353 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:42,880 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:43,406 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:43,420 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:14:43,421 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:14:43,421 - DEBUG - Extracted Source A status: 'fail' (raw: fail)
2025-12-16 19:14:43,421 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:14:43,422 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:14:43,878 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=638, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:43,880 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=27895
2025-12-16 19:14:43,930 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:44,455 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:44,455 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[0, 0, 0] (LOW=3, HIGH=0), current_state=0, last_state=1
2025-12-16 19:14:44,456 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 1 -> 0 (pressed=True, consecutive_same=666)
2025-12-16 19:14:44,456 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:44,456 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:44,457 - INFO - [BUTTON] Mute button state: 0 (LOW=0, HIGH=1), is_pressed=True
2025-12-16 19:14:44,457 - INFO - [BUTTON] Mute button state changed: False -> True
2025-12-16 19:14:44,457 - INFO - [BUTTON] Mute button PRESSED detected - processing toggle...
2025-12-16 19:14:44,457 - INFO - [BUTTON] Mute button pressed - Toggling BUZZER_MUTED from True to False
2025-12-16 19:14:44,492 - INFO - [BUTTON] Calling _update_buzzer_muted_config(False)...
2025-12-16 19:14:44,495 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:14:44,495 - INFO - [BUTTON] Config update result: True
2025-12-16 19:14:44,496 - INFO - [BUTTON] Mute button pressed - BUZZER_MUTED changed from True to False (config.py updated successfully)
2025-12-16 19:14:44,499 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:44,500 - INFO - Buzzer enabled (unmuted, ALARM_STATUS is True)
2025-12-16 19:14:44,500 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:44,639 - INFO - [BUTTON-DEBUG] GPIO 19 STATE CHANGE: rapid_reads=[1, 1, 1] (LOW=0, HIGH=3), current_state=1, last_state=0
2025-12-16 19:14:44,640 - ERROR - [BUTTON-PRESS] MUTE BUTTON STATE CHANGE DETECTED: GPIO 19 0 -> 1 (pressed=False, consecutive_same=6)
2025-12-16 19:14:44,640 - ERROR - [BUTTON-PRESS] Calling mute_button_callback_wrapper(19)...
2025-12-16 19:14:44,641 - INFO - [BUTTON] Mute button callback triggered on GPIO 19
2025-12-16 19:14:44,676 - INFO - [BUTTON] Mute button state: 1 (LOW=0, HIGH=1), is_pressed=False
2025-12-16 19:14:44,677 - INFO - [BUTTON] Mute button state changed: True -> False
2025-12-16 19:14:44,677 - INFO - [BUTTON] Mute button event: is_pressed=False (release event, ignoring)
2025-12-16 19:14:44,678 - ERROR - [BUTTON-PRESS] mute_button_callback_wrapper completed
2025-12-16 19:14:44,988 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:45,490 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:46,002 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:46,297 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:14:46,298 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:14:46,298 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:14:46,298 - DEBUG - GPIO pin 5 set to OFF (active_high: True)
2025-12-16 19:14:46,298 - INFO - Disabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:14:46,298 - DEBUG - GPIO pin 22 set to OFF (active_high: True)
2025-12-16 19:14:46,299 - INFO - Disabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:14:46,299 - DEBUG - Source A Status: fail - Disabled LEDs 2, 3
2025-12-16 19:14:46,299 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:14:46,299 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:14:46,299 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:14:46,299 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:14:46,300 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:14:46,300 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:46,300 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:46,301 - DEBUG - Source A or Source B fail - Enabled LED 10
2025-12-16 19:14:46,301 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:14:46,301 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:14:46,301 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:14:46,301 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:14:46,301 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:14:46,302 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:14:46,302 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:14:46,302 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:14:46,302 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:14:46,302 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:14:46,302 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:14:46,302 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:14:46,302 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:14:46,303 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:14:46,303 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:14:46,303 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:14:46,729 - INFO - Continuous beep pattern stopped
2025-12-16 19:14:46,730 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:14:46,801 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:46,830 - INFO - Playing continuous beep pattern 1000Hz on GPIO pin 18 (beep: 0.2s, pause: 0.5s, volume: 75%)
2025-12-16 19:14:46,831 - INFO - LED 10 enabled - Buzzer enabled with beep pattern (volume: 75%)
2025-12-16 19:14:46,831 - INFO - ================================================================================
2025-12-16 19:14:46,831 - INFO - UPS STATUS CHECK
2025-12-16 19:14:46,831 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:46,831 - INFO - Source A Status: fail | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:14:46,831 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:14:47,301 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:47,801 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:48,302 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:48,802 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:48,882 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=588, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:48,882 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=28519
2025-12-16 19:14:49,303 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:49,803 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:50,304 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:50,804 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:51,305 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:51,806 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:52,306 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:52,807 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:53,308 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:53,809 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:53,885 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=1555, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:53,886 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=29486
2025-12-16 19:14:54,310 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:54,811 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:55,312 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:55,812 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:56,313 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:56,800 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:14:56,806 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:14:56,807 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:14:56,808 - DEBUG - State Reference: 434717 (type: int)
2025-12-16 19:14:56,809 - DEBUG - Callback Context type: list
2025-12-16 19:14:56,809 - DEBUG - Additional Args: (None,)
2025-12-16 19:14:56,809 - DEBUG - varBinds parameter count: 0
2025-12-16 19:14:56,809 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:14:56,810 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:14:56,810 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:14:56,810 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:14:56,811 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:14:56,811 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:14:56,811 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.011s)
2025-12-16 19:14:56,812 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:14:56,812 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:14:56,813 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:14:56,813 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:14:56,813 - DEBUG - Processing variable bindings...
2025-12-16 19:14:56,814 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1138401 timeticks (type: TimeTicks)
2025-12-16 19:14:56,814 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:56,814 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:56,815 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 (type: ObjectIdentifier)
2025-12-16 19:14:56,815 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 (type: ObjectIdentifier)
2025-12-16 19:14:56,816 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.16 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:14:56,816 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsCommunicationAbnormal
2025-12-16 19:14:56,816 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:56,817 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = ATS Normal (type: OctetString)
2025-12-16 19:14:56,817 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:14:56,817 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:56,818 - DEBUG - Processed 3 variables total
2025-12-16 19:14:56,818 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:14:56,818 - INFO - ================================================================================
Timestamp: 2025-12-16 19:14:56
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16
Trap Name: atsCommunicationAbnormal
Event Type:  ALARM TRIGGERED (trigger)
Severity:  CRITICAL (critical)
Description: SEVERE: Communication connection abnormal.
Will be cleared by: atsCommunicationToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1138401 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.16
  1.3.6.1.4.1.37662.1.2.2.1.2: ATS Normal
================================================================================

2025-12-16 19:14:56,819 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:14:56,819 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:14:56,820 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.16, battery_related: True
2025-12-16 19:14:56,820 - INFO - Trap name from OID: atsCommunicationAbnormal
2025-12-16 19:14:56,820 - INFO - Alarm severity: critical, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:14:56,821 - INFO - Triggered blinking LED on GPIO pin 17 for atsCommunicationAbnormal alarm
2025-12-16 19:14:56,822 - INFO - GPIO LED triggered on pin 17 for atsCommunicationAbnormal (critical) - ALARM TRIGGERED
2025-12-16 19:14:56,823 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:56,823 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:56,823 - INFO - Enabled LED 10 for alarm: atsCommunicationAbnormal (critical)
2025-12-16 19:14:56,839 - INFO - Detected device type: ats
2025-12-16 19:14:57,385 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:57,920 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:58,444 - INFO - Playing critical beep (3x) for atsCommunicationAbnormal
2025-12-16 19:14:58,444 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:58,445 - INFO - Sound alert triggered for atsCommunicationAbnormal (critical)
2025-12-16 19:14:58,446 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:14:58,446 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:14:58,448 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:14:58,449 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:14:58,449 - DEBUG - State Reference: 434718 (type: int)
2025-12-16 19:14:58,450 - DEBUG - Callback Context type: list
2025-12-16 19:14:58,450 - DEBUG - Additional Args: (None,)
2025-12-16 19:14:58,451 - DEBUG - varBinds parameter count: 0
2025-12-16 19:14:58,451 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:14:58,451 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:14:58,451 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:14:58,451 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:14:58,452 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:14:58,452 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:14:58,452 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.006s)
2025-12-16 19:14:58,452 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:14:58,452 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:14:58,453 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:14:58,453 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:14:58,453 - DEBUG - Processing variable bindings...
2025-12-16 19:14:58,454 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1138401 timeticks (type: TimeTicks)
2025-12-16 19:14:58,454 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:58,454 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 (type: ObjectIdentifier)
2025-12-16 19:14:58,454 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 (type: ObjectIdentifier)
2025-12-16 19:14:58,454 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.17 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:14:58,455 - INFO -   -> snmpTrapOID matches known UPS trap (normalized): atsEpoAlarm
2025-12-16 19:14:58,455 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:58,455 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Voltage Normal (type: OctetString)
2025-12-16 19:14:58,455 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:14:58,455 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:58,455 - DEBUG - Processed 3 variables total
2025-12-16 19:14:58,456 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:14:58,456 - CRITICAL - ================================================================================
Timestamp: 2025-12-16 19:14:58
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17
Trap Name: atsEpoAlarm
Event Type:  ALARM TRIGGERED (trigger)
Severity:  WARNING (warning)
Description: WARNING: EPO Alarm.
Will be cleared by: atsEpoToNormal
Variables:
  1.3.6.1.2.1.1.3.0: 1138401 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.17
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Voltage Normal
================================================================================

2025-12-16 19:14:58,456 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:14:58,457 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:14:58,457 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.3.1.2.0.17, battery_related: True
2025-12-16 19:14:58,457 - INFO - Trap name from OID: atsEpoAlarm
2025-12-16 19:14:58,457 - INFO - Alarm severity: warning, Event type: trigger, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:14:58,458 - INFO - Triggered blinking LED on GPIO pin 17 for atsEpoAlarm alarm
2025-12-16 19:14:58,458 - INFO - GPIO LED triggered on pin 17 for atsEpoAlarm (warning) - ALARM TRIGGERED
2025-12-16 19:14:58,459 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:58,459 - INFO - Enabled LED 10 (ALARM, Red) on GPIO pin 12 - BLINKING
2025-12-16 19:14:58,460 - INFO - Enabled LED 10 for alarm: atsEpoAlarm (warning)
2025-12-16 19:14:58,649 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:14:58,649 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:14:58,650 - DEBUG - Extracted Source A status: 'ok' (raw: ok)
2025-12-16 19:14:58,650 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:14:58,650 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:14:58,900 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=2214, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:14:58,901 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=30145
2025-12-16 19:14:58,992 - DEBUG - GPIO pin 12 set to ON (active_high: True)
2025-12-16 19:14:59,516 - INFO - Playing warning beep (2x) for atsEpoAlarm
2025-12-16 19:14:59,517 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:59,518 - INFO - Sound alert triggered for atsEpoAlarm (warning)
2025-12-16 19:14:59,518 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:14:59,519 - DEBUG - Captured source address from datagram_received: ('192.168.111.173', 161)
2025-12-16 19:14:59,522 - INFO - === SNMP Trap Received (Callback Triggered) ===
2025-12-16 19:14:59,522 - DEBUG - Context Name:  Oraspberry1S@
2025-12-16 19:14:59,523 - DEBUG - State Reference: 434719 (type: int)
2025-12-16 19:14:59,524 - DEBUG - Callback Context type: list
2025-12-16 19:14:59,524 - DEBUG - Additional Args: (None,)
2025-12-16 19:14:59,524 - DEBUG - varBinds parameter count: 0
2025-12-16 19:14:59,526 - DEBUG - varBinds is empty, checking cbCtx for variable bindings...
2025-12-16 19:14:59,527 - DEBUG - Found 3 variable bindings in cbCtx
2025-12-16 19:14:59,527 - DEBUG - Variable Bindings (raw) - Total: 3
2025-12-16 19:14:59,527 - DEBUG -   [0] OID: 1.3.6.1.2.1.1.3.0, Type: TimeTicks, Value: <TimeTicks value object, tagSet <TagSet object, tags 64:0:3>, subtypeSpec <ConstraintsIntersection o
2025-12-16 19:14:59,532 - DEBUG -   [1] OID: 1.3.6.1.6.3.1.1.4.1.0, Type: ObjectIdentifier, Value: <ObjectIdentifier value object, tagSet <TagSet object, tags 0:0:6>, payload [1.3.6.1.4.1.37662.1.2.2
2025-12-16 19:14:59,532 - DEBUG -   [2] OID: 1.3.6.1.4.1.37662.1.2.2.1.2, Type: OctetString, Value: <OctetString value object, tagSet <TagSet object, tags 0:0:4>, subtypeSpec <ConstraintsIntersection 
2025-12-16 19:14:59,533 - DEBUG - Found source address from capture cache: ('192.168.111.173', 161) (age: 0.014s)
2025-12-16 19:14:59,533 - INFO - Source IP detected: 192.168.111.173 (from 192.168.111.173:161)
2025-12-16 19:14:59,533 - INFO - Allowed IPs: ['192.168.111.173', '127.0.0.1', '192.168.111.173', '192.168.111.137']
2025-12-16 19:14:59,534 - INFO - Source IP 192.168.111.173 is in allowed list - processing trap
2025-12-16 19:14:59,534 - DEBUG - UPS info for 192.168.111.173: name='Borri STS32A ', location='KW East'
2025-12-16 19:14:59,534 - DEBUG - Processing variable bindings...
2025-12-16 19:14:59,534 - DEBUG - Processing OID: 1.3.6.1.2.1.1.3.0 = 1138652 timeticks (type: TimeTicks)
2025-12-16 19:14:59,534 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:59,535 - DEBUG - Processing OID: 1.3.6.1.6.3.1.1.4.1.0 = 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 (type: ObjectIdentifier)
2025-12-16 19:14:59,535 - INFO -   -> Found snmpTrapOID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 (type: ObjectIdentifier)
2025-12-16 19:14:59,538 - DEBUG -   -> Normalized ATS trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19 -> 1.3.6.1.4.1.37662.1.2.3.1.2.0.19 (atsAgent(2) -> atsAgent(3))
2025-12-16 19:14:59,539 - INFO -   -> snmpTrapOID matches known UPS trap: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:14:59,539 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:59,539 - DEBUG - Processing OID: 1.3.6.1.4.1.37662.1.2.2.1.2 = Source A Frequency Normal (type: OctetString)
2025-12-16 19:14:59,540 - DEBUG -   -> Matched ATS MIB pattern (Borri STS32A)
2025-12-16 19:14:59,540 - DEBUG -   -> Stored as generic variable
2025-12-16 19:14:59,540 - DEBUG - Processed 3 variables total
2025-12-16 19:14:59,541 - DEBUG - Trap Summary - OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19, Source: 192.168.111.173:161, Variables: 3, Battery-related: True
2025-12-16 19:14:59,542 - INFO - ================================================================================
Timestamp: 2025-12-16 19:14:59
Source: 192.168.111.173:161
Context Name:  Oraspberry1S@
Trap OID: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19
Trap Name: atsSourceAfrequencyAbnormalToNormal
Event Type:  ALARM CLEARED/RESUMED (resumption)
Severity:  INFO (info)
Description: INFORMATION: Source A Frequency Normal.
Clears Alarm(s): atsSourceAfrequencyAbnormal
Variables:
  1.3.6.1.2.1.1.3.0: 1138652 timeticks
  1.3.6.1.6.3.1.1.4.1.0: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19
  1.3.6.1.4.1.37662.1.2.2.1.2: Source A Frequency Normal
================================================================================

2025-12-16 19:14:59,543 - DEBUG - Email notifications disabled (EMAIL_ENABLED = False in config.py)
2025-12-16 19:14:59,543 - DEBUG - SMS notifications disabled (SMS_ENABLED = False in config.py)
2025-12-16 19:14:59,543 - INFO - GPIO LED controller available, trap_oid: 1.3.6.1.4.1.37662.1.2.2.1.2.0.19, battery_related: True
2025-12-16 19:14:59,543 - INFO - Trap name from OID: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:14:59,544 - INFO - Alarm severity: info, Event type: resumption, GPIO pins: {'critical': 17, 'warning': 17}
2025-12-16 19:14:59,579 - INFO - Resumption event 'atsSourceAfrequencyAbnormalToNormal' clears alarm(s): atsSourceAfrequencyAbnormal
2025-12-16 19:14:59,579 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:14:59,580 - INFO - Disabled LED 10 (ALARM, Red) on GPIO pin 12
2025-12-16 19:14:59,580 - INFO - Disabled LED 10 (red alarm LED) for resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:14:59,615 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:14:59,619 - INFO - Enabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:14:59,623 - INFO - Enabled LED 2 (green normal LED) for resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:14:59,624 - INFO - Cleared LED on GPIO pin 17 for warning alarm
2025-12-16 19:14:59,624 - INFO - GPIO LED cleared for 'atsSourceAfrequencyAbnormal' (warning) - resumption: atsSourceAfrequencyAbnormalToNormal
2025-12-16 19:14:59,625 - DEBUG - Resumption event 'atsSourceAfrequencyAbnormalToNormal' - no sound alert
2025-12-16 19:14:59,625 - DEBUG - === Trap Processing Complete ===

2025-12-16 19:15:01,521 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:15:01,521 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:15:01,521 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:15:01,522 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:15:01,522 - INFO - Enabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:15:01,522 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:15:01,522 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:15:01,522 - DEBUG - Source A Status: ok - Enabled LEDs 2, 9
2025-12-16 19:15:01,522 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:15:01,523 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:15:01,523 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:15:01,523 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:15:01,523 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:15:01,523 - DEBUG - GPIO pin 22 set to ON (active_high: True)
2025-12-16 19:15:01,523 - INFO - Enabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:15:01,523 - DEBUG - GPIO pin 16 set to ON (active_high: True)
2025-12-16 19:15:01,524 - INFO - Enabled LED 8 (SYSTEM OK, Green) on GPIO pin 16
2025-12-16 19:15:01,524 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:15:01,524 - INFO - Disabled LED 10 (ALARM, Red) on GPIO pin 12
2025-12-16 19:15:01,524 - DEBUG - Both sources ok - Enabled LEDs 3, 8, Disabled LED 10
2025-12-16 19:15:01,524 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:15:01,524 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:15:01,524 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:15:01,525 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:15:01,525 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:15:01,525 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:15:01,525 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:15:01,525 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:15:01,525 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:15:01,526 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:15:01,526 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:15:01,526 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:15:01,526 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:15:01,526 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:15:01,527 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:15:01,527 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:15:01,776 - INFO - Continuous beep pattern stopped
2025-12-16 19:15:01,776 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:15:01,777 - INFO - LED 10 disabled and LED 8 enabled - Buzzer disabled
2025-12-16 19:15:01,778 - INFO - Updated ALARM_STATUS in config.py to False
2025-12-16 19:15:01,795 - INFO - [BUTTON] Updated BUZZER_MUTED in config.py to False (file written successfully)
2025-12-16 19:15:01,795 - INFO - LED 10 changed from enabled to disabled -> ALARM_STATUS = False, BUZZER_MUTED = False
2025-12-16 19:15:01,795 - INFO - ================================================================================
2025-12-16 19:15:01,796 - INFO - UPS STATUS CHECK
2025-12-16 19:15:01,796 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:15:01,796 - INFO - Source A Status: ok | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:15:01,796 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:15:03,904 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=2810, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:15:03,904 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=30741
2025-12-16 19:15:08,907 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=3778, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:15:08,907 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=31709
2025-12-16 19:15:11,803 - INFO - Detected device type: ats
2025-12-16 19:15:13,620 - DEBUG - Successfully got input status as ATS (Source A/B found)
2025-12-16 19:15:13,621 - DEBUG - Input status has ATS structure (source_a/source_b), using device_type='ats'
2025-12-16 19:15:13,621 - DEBUG - Extracted Source A status: 'ok' (raw: ok)
2025-12-16 19:15:13,621 - DEBUG - Extracted Source B status: 'ok' (raw: ok)
2025-12-16 19:15:13,622 - DEBUG - Attempting to export UPS status to /usr/local/src/raspberrySTS/UPSState.txt...
2025-12-16 19:15:13,923 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=4427, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:15:13,923 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=32358
2025-12-16 19:15:16,460 - INFO - UPS status exported successfully to /usr/local/src/raspberrySTS/UPSState.txt
2025-12-16 19:15:16,461 - DEBUG - Extracting output status using device_type: ats
2025-12-16 19:15:16,461 - DEBUG - ATS load_raw=0.0 (matches formatted '0.0%', using directly): 0.0%
2025-12-16 19:15:16,461 - DEBUG - GPIO pin 5 set to ON (active_high: True)
2025-12-16 19:15:16,461 - INFO - Enabled LED 2 (MBP1 Normal, Green) on GPIO pin 5
2025-12-16 19:15:16,461 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:15:16,462 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:15:16,462 - DEBUG - Source A Status: ok - Enabled LEDs 2, 9
2025-12-16 19:15:16,462 - DEBUG - GPIO pin 23 set to ON (active_high: True)
2025-12-16 19:15:16,462 - INFO - Enabled LED 4 (MBP2 Normal, Green) on GPIO pin 23
2025-12-16 19:15:16,462 - DEBUG - GPIO pin 20 set to ON (active_high: True)
2025-12-16 19:15:16,462 - INFO - Enabled LED 9 (OUTPUT Status, Green) on GPIO pin 20
2025-12-16 19:15:16,462 - DEBUG - Source B Status: ok - Enabled LEDs 4, 9
2025-12-16 19:15:16,463 - DEBUG - GPIO pin 22 set to ON (active_high: True)
2025-12-16 19:15:16,463 - INFO - Enabled LED 3 (SYNC Status 1, Green) on GPIO pin 22
2025-12-16 19:15:16,463 - DEBUG - GPIO pin 16 set to ON (active_high: True)
2025-12-16 19:15:16,463 - INFO - Enabled LED 8 (SYSTEM OK, Green) on GPIO pin 16
2025-12-16 19:15:16,463 - DEBUG - GPIO pin 12 set to OFF (active_high: True)
2025-12-16 19:15:16,463 - INFO - Disabled LED 10 (ALARM, Red) on GPIO pin 12
2025-12-16 19:15:16,463 - DEBUG - Both sources ok - Enabled LEDs 3, 8, Disabled LED 10
2025-12-16 19:15:16,463 - DEBUG - GPIO pin 25 set to ON (active_high: True)
2025-12-16 19:15:16,464 - INFO - Enabled LED 7 (SYNC Status 2, Green) on GPIO pin 25
2025-12-16 19:15:16,464 - DEBUG - GPIO pin 24 set to OFF (active_high: True)
2025-12-16 19:15:16,464 - INFO - Disabled LED 6 (SYNC Status 1, Green) on GPIO pin 24
2025-12-16 19:15:16,464 - DEBUG - Output Source: Source B - Enabled LED 7, Disabled LED 6
2025-12-16 19:15:16,464 - DEBUG - [LED Control] output_load_percent=0.0, output_load=0.0%
2025-12-16 19:15:16,464 - INFO - [LED Control] Load percentage: 0.0% -> integer: 0
2025-12-16 19:15:16,464 - DEBUG - GPIO pin 15 set to ON (active_high: True)
2025-12-16 19:15:16,465 - INFO - Enabled LED 14 (LOAD Normal Very Lower, Green) on GPIO pin 15
2025-12-16 19:15:16,465 - DEBUG - GPIO pin 26 set to OFF (active_high: True)
2025-12-16 19:15:16,465 - INFO - Disabled LED 11 (LOAD Overload, Red) on GPIO pin 26
2025-12-16 19:15:16,465 - DEBUG - GPIO pin 27 set to OFF (active_high: True)
2025-12-16 19:15:16,465 - INFO - Disabled LED 12 (LOAD Normal Middle, Green) on GPIO pin 27
2025-12-16 19:15:16,465 - DEBUG - GPIO pin 11 set to OFF (active_high: True)
2025-12-16 19:15:16,465 - INFO - Disabled LED 13 (LOAD Normal Lower, Green) on GPIO pin 11
2025-12-16 19:15:16,465 - DEBUG - Load 0% (L1: 0-5%): LED 14=ON, LED 11=OFF, LED 12=OFF, LED 13=OFF
2025-12-16 19:15:16,466 - INFO - Disabled buzzer/speaker (Speaker/Buzzer) on GPIO pin 18 (set to HIGH)
2025-12-16 19:15:16,466 - INFO - LED 10 disabled and LED 8 enabled - Buzzer disabled
2025-12-16 19:15:16,466 - INFO - ================================================================================
2025-12-16 19:15:16,466 - INFO - UPS STATUS CHECK
2025-12-16 19:15:16,466 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:15:16,466 - INFO - Source A Status: ok | Source B Status: ok | Output Source: Source B | Output Current: 0.0% | Output Load: 0.0%
2025-12-16 19:15:16,466 - INFO - --------------------------------------------------------------------------------
2025-12-16 19:15:18,925 - INFO - [BUTTON] Periodic check - GPIO 19 (Mute): state=1 (pressed=False), last_state=1, unchanged_count=5031, consecutive_errors=0, time_since_last_success=0.00s
2025-12-16 19:15:18,926 - INFO - [BUTTON] Periodic check - GPIO 21 (Reset): state=1 (pressed=False), last_state=1, unchanged_count=32962
